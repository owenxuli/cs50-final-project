{% extends "layout.html" %}

{% block title %}
    Simulations
{% endblock %}

{% block main %}
<script>
    $(document).ready(function () {
        var board = Chessboard('myBoard', {
            draggable: true,
            dropOffBoard: 'trash',
            sparePieces: true
        });

        var moveCounter = 0;
        var maxMoves = 10;  // Set the maximum number of moves

        function onDragStart (source, piece, position, orientation) {
            // Only allow dragging if the maximum moves haven't been reached
            return moveCounter < maxMoves;
        }

        function onDrop (source, target) {
            // Increment move counter after each move
            moveCounter++;

            // Update the board position after each move
            board.position(board.fen());

            // Check if the maximum moves have been reached
            if (moveCounter >= maxMoves) {
                alert('Maximum moves reached!');
            }
        }

        var config = {
            draggable: true,
            dropOffBoard: 'trash',
            sparePieces: true,
            onDragStart: onDragStart,
            onDrop: onDrop
        };

        board = Chessboard('myBoard', config);
    });
</script>

{% endblock %}